<script type="text/x-handlebars" data-template-name="map/keys">

  <div class="mod-map-toolbar">
    <div class="map-toolbar__actions">
      <a {{action "add"}}>
        <i class="plus"></i>
        Add key
      </a>
    </div>

    {{partial "map/toolbar-url"}}
  </div>


  <div class="content-wrapper">
    <form class="form" {{action "save" on="submit"}}>
      {{#each reformatted_structure as |struct index|}}
        <div class="row-wrapper">

          <div class="row-prefix" draggable="true" index="{{index}}">
            <span class="row-prefix__title row-prefix__center">
              {{increment index}}
            </span>
          </div>

          <div class="row">
            <div class="field">
              {{input value=struct.key placeholder="key"}}
            </div>
            <div class="field secondary">
              <div class="form__selectize">
                {{ember-selectize
                  content=controllers.map.types
                  selection=struct.type
                  optionValuePath="content.value"
                  optionLabelPath="content.name"
                  placeholder="type"}}
              </div>
            </div>
          </div>

        </div>
      {{/each}}

      <button class="btn" type="submit">Save</button>

      {{x-wuphf}}
    </form>

    <p class="note">
      On save, <strong>empty rows and keys which
      cause a conflict will be removed</strong>.
      PS. You can move rows by dragging one of the boxes,
      with a number in it, on to another box.
    </p>
  </div>

</script>
